---
title: 'ProxySQL integration'
tags:
  - Integrations
  - ProxySQL
  - Prometheus
  - Kubernetes
---

import kubernetesProxySQLDashboard from 'images/kubernetes_screenshot-crop_proxy-sql-dashboard.png'

[ProxySQL](https://proxysql.com/blog/releasing-proxysql-2-1-0/) is an open source high performance, high availability, database protocol aware proxy for MySQL. It helps you squeeze the last drop of performance out of your MySQL cluster with advanced connection management and flexible routing to scale across thousands of servers.

<img
  title="ProxySQL Dashboard"
  alt="ProxySQL Dashboard"
  src={kubernetesProxySQLDashboard}
/>

## Enable the integration

Follow these steps to enable the integration.

1. Follow the [ProxySQL documentation](https://proxysql.com/documentation/prometheus-exporter/) for Prometheus to discover the metrics endpoints.

2. Set up Prometheus monitoring. Prometheus metrics needs to be integrated with New Relic, you can use the Prometheus Agent or the Remote Write integration, see [how to send Prometheus metrics](/docs/infrastructure/prometheus-integrations/get-started/send-prometheus-metric-data-new-relic/).

3. Use the following query to confirm metrics are being ingested as expected:

  ```
    FROM Metric SELECT count(*) WHERE metricName LIKE 'proxysql_%' FACET metricName LIMIT MAX
  ```

4. Install the [ProxySQL quickstart](https://newrelic.com/instant-observability/ProxySQL-quickstart) to access built-in dashboards and alerts. 

  Once you imported, you can edit or clone the assets to adapt them to your specific requirements.

## Find and use the data

### Metrics

Prometheus metrics are stored as dimensional metrics. You can [query using NRQL](/docs/telemetry-data-platform/get-data/apis/query-metric-data-type/) or use the [Data Explorer](/docs/query-your-data/explore-query-data/browse-data/introduction-data-explorer/) to browse the available metrics, facet, and filter by the associated dimensions.

The different sets of metrics exposed by this integration are defined in the ProxySQL documentation.

Use the following NRQL queries to understand the metrics being ingested in New Relic:

* List unique metric names:

  ```
  FROM Metric SELECT uniques(metricName) WHERE metricName LIKE 'proxysql_%' LIMIT MAX
  ```

* Count number of metric updates:

  ```
  FROM Metric SELECT datapointcount() WHERE metricName LIKE 'proxysql_%' FACET metricName
  ```

* Estimate data ingestion (daily ingest, in bytes):

	```
  FROM Metric SELECT bytecountestimate() WHERE metricName LIKE 'proxysql_%' SINCE 1 day ago
  ```

### Entities

This integration enables `ProxySQL` entities powering the full set of [entity capabilities](/docs/new-relic-solutions/new-relic-one/core-concepts/what-entity-new-relic/) such as golden metrics, entity dashboards, workloads, and lookout.

## Troubleshooting

Follow the troubleshooting tips from [ProxySQL documentation](https://proxysql.com/documentation/frequently-asked-questions/) to make sure that metrics are configured as expected on your cluster.

You can also check the specific [troubleshooting guidelines](/docs/infrastructure/prometheus-integrations/troubleshooting/no-data-appears-prometheus-integration) for Prometheus integrations.
---
title: 'GitJenkinsLab integration'
tags:
  - Integrations
  - Jenkins
  - Prometheus
  - Kubernetes
---

import kubernetesJenkinsDashboard from 'images/kubernetes_screenshot-crop_jenkins-dashboard.png'

[Jenkins](https://www.jenkins.io/doc/) is a self-contained, open-source automation server that can automate all sorts of tasks related to building, testing, and delivering or deploying software. Jenkins can be installed through native system packages, Docker, or even run standalone by any machine with a Java Runtime Environment (JRE) installed.

Jenkins can monitor:
* jenkins health
* jenkins total jobs/successful jobs/failure jobs
* jenkins last build status
* jenkins queue rate

Use the OpenTelemetry plugin in New Relic to monitor Jenkins.

<img
  title="Jenkins Dashboard"
  alt="Jenkins Dashboard"
  src={kubernetesJenkinsDashboard}
/>

## Enable the integration

Follow these steps to enable the integration.

### Step 1: Follow Jenkins documentation

Follow the [Jenkins documentation](https://plugins.jenkins.io/prometheus/) for Prometheus to discover the metrics endpoints.

### Step 2: Set up Prometheus monitoring

Prometheus metrics needs to be integrated with New Relic, you can use the Prometheus Agent or the Remote Write integration, see [how to send Prometheus metrics](https://docs.newrelic.com/docs/infrastructure/prometheus-integrations/get-started/send-prometheus-metric-data-new-relic/).

Change both the `remote_write` and the `scrape_configs` sections of the YAML file.

```
remote_write:
- url: https://staging-metric-api.newrelic.com/prometheus/v1/write?prometheus_server=jenkins-prometheus
  bearer_token: xxxxxxxxxxxxxxxxxxxxxxxxx
...
scrape_configs:
  # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.
  - job_name: 'jenkins'
    params:
      format: ["prometheus"]
    metrics_path: "prometheus"
    scheme: "http"
    static_configs:
      - targets: ["localhost:8080"]
```

### Step 3: Checking

Once integrated, use the following query to confirm metrics are being ingested as expected:

```
  FROM Metric SELECT count(*) WHERE metricName LIKE 'jenkins_%' FACET metricName LIMIT MAX SINCE 30 minutes ago
```

### Step 4: Install the quickstart and see alerts

Install the [Jenkins quickstart](https://newrelic.com/instant-observability/jenkins) to access built-in dashboards and alerts. 

Once you import the dashboard, you can adapt assets (edit or clon) based on your specific requirements.

## Find and use the data

### Metrics

Prometheus metrics are stored as dimensional metrics. You can [query using NRQL](/docs/telemetry-data-platform/get-data/apis/query-metric-data-type/) or use the [Data Explorer](/docs/query-your-data/explore-query-data/browse-data/introduction-data-explorer/) to browse the available metrics, facet, and filter by the associated dimensions.

The different sets of metrics exposed by this integration are defined in the [Jenkins documentation](https://plugins.jenkins.io/prometheus/).

Use the following NRQL queries to understand the metrics being ingested in New Relic:

* List unique metric names:

  ```
  FROM Metric SELECT uniques(metricName) WHERE prometheus_server LIKE 'jenkins_%' LIMIT MAX
  ```

* Count number of metric updates:

  ```
  FROM Metric SELECT datapointcount() WHERE prometheus_server LIKE 'jenkins_%' FACET metricName
  ```

* Estimate data ingestion (daily ingest, in bytes):

	```
  FROM Metric SELECT bytecountestimate() WHERE prometheus_server LIKE 'jenkins_%' SINCE 1 day ago
  ```

### Entities

This integration enables `Jenkins` entities powering the full set of [entity capabilities](/docs/new-relic-solutions/new-relic-one/core-concepts/what-entity-new-relic/) such as golden metrics, entity dashboards, workloads, and lookout.

## Troubleshooting

Follow the troubleshooting tips from [Jenkins documentation](https://www.jenkins.io/doc/book/troubleshooting/) to make sure that metrics are configured as expected on your cluster.

You can also check the specific [troubleshooting guidelines](/docs/infrastructure/prometheus-integrations/troubleshooting/no-data-appears-prometheus-integration) for Prometheus integrations.
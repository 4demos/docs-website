---
title: Manage your synthetic monitors with NerdGraph
tags:
    - NerdGraph
    - Synthetic
metaDescription: 
---

With NerdGraph, you can automate creating, updating, configuring, or deleting your synthetic monitors. Using NerdGraph gives you:

* Management of your certificate check monitors, broken links monitors, and step monitors, not previously supported through REST APIs.
* Simplified processes for creating scripted monitors.
* The ability to attach scripts to scripted monitors with only one call, rather than the four calls needed with REST APIs.
* The ability to add tags to your monitors. 

If you've never used NerdGraph, read [Intro to NerdGraph](https://docs.newrelic.com/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/) for a more thorough tutorial. 

## Use queries to retrieve data [#query]

Queries make requests to fetch data. Queries in NerdGraph allow you to modify the amount of data retrieved in a query, depending on your needs and if it's supported by the schema. Check out our [NerdGraph entities API tutorial]() to learn additional query capabilities available to your synthetic monitors. 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="query-examples"
    title="Query monitors"
  >
```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR'") {
      results {
        entities {
          ... on SyntheticMonitorEntityOutline {
            guid
            name
            accountId
            monitorType
            tags {
              key
              values
            }
          }
        }
      }
    }
  }
}
``` 
  </Collapser>

  <Collapser
    className="freq-link"
    id="private-examples"
    title="Query private locations"
  >
```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'") {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
``` 

  </Collapser>

  <Collapser
    className="freq-link"
    id="credentials-example"
    title="Query secure credentials
"
  >

  <Callout variant="important">
Secure credential values cannot be retrieved via the API or UI. Only metadata can be retrieved.
  </Callout>

```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'SECURE_CRED'") {
      results {
        entities {
          ... on SecureCredentialEntityOutline {
            accountId
            guid
            name
            tags {
              key
              values
            }
            updatedAt
          }
        }
      }
    }
  }
}
```
  </Collapser>
</CollapserGroup>

## Manage your synthetic monitors [#mutation]

Unlike queries, mutations are dynamic requests that create or update data. Mutations require the keyword mutation and the name of the mutation you would like to apply. NerdGraph mutations are restricted to a subset of all possible mutations.

<CollapserGroup>
  <Collapser
    className="freq-link"
    id=""
    title="Create a variety of synthetic monitors"
>
  
  ### Create scripted API monitors

    ```
  mutation {
    syntheticsCreateScriptApiMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: {
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          }, 
      name: "<MONITOR_NAME>", 
      period: <PERIOD>, 
      script: "<SCRIPT_CONTENT>", 
      status: <STATUS>
      }
    ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Create broken links monitors

  ```
  mutation {
    syntheticsCreateBrokenLinksMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: {
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          }, 
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        status: <STATUS>, 
        uri: "<MONITORED_URI>", 
        tags: {
          key: "<TAG_NAME>", 
          values: "<TAG_VALUE>"
          }
        }
      ) {
        errors {
          description
          type
        }
    }
  }
  ```

  ### Create scripted browser monitors

    ```
  mutation {
    syntheticsCreateScriptBrowserMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: { 
        browserType: "<BROWSER_TYPE>", 
        browserVersion: <BROWSER_VERSION>, 
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          }, 
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        script: "<SCRIPT_CONTENT>", 
        scriptLanguage: "<SCRIPT_LANGUAGE>", 
        status: <STATUS>, 
        advancedOptions: {
          enableScreenshotOnFailureAndScript: false
        }
      }
    ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Create simple browser monitors

  ```
  mutation {
    syntheticsCreateSimpleBrowserMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: {
        browserType: "<BROWSER_TYPE>", 
        browserVersion: <BROWSER_VERSION>, 
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          }, 
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        scriptLanguage: "<SCRIPT_LANGUAGE>", 
        status: <STATUS>, 
        uri: "<MONITORED_URI>", 
        advancedOptions: {
          customHeaders: {
            name: "<HEADER_NAME>", 
            value: "<HEADER_VALUE>"
          }, 
          enableScreenshotOnFailureAndScript: <ENABLE_SCREENSHOT>, 
          responseValidationText: "<VALIDATION_TEXT>", 
          useTlsValidation: <TLS_VALIDATION>
        }
      ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Create certificate check monitors

    ```
  mutation {
    syntheticsCreateCertCheckMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: {
        domain: "<DOMAIN>", 
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          },
        name: "<MONITOR_NAME>", 
        numberDaysToFailBeforeCertExpires: <DAYS_UNTIL_EXPIRATION>, 
        period: <PERIOD>, 
        status: <STATUS>
      }
    ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Create simple ping monitors

    ```
  mutation {
    syntheticsCreateSimpleMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: {
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          }, 
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        status: <STATUS>, 
        uri: "<MONITORED_URI>", 
        advancedOptions: {
          customHeaders: {
            name: "<HEADER_NAME>", 
            value: "<HEADER_VALUE>"
          }, 
          redirectIsFailure: <REDIRECT_IS_FAILURE>, 
          responseValidationText: "<VALIDATION_TEXT>", 
          shouldBypassHeadRequest: <BYPASS_HEAD_REQUEST>, 
          useTlsValidation: <TLS_VALIDATION>
        }
      }
  ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Create step monitors

  ```
  SOMETHING
  ```

  </Collapser>

  <Collapser
    className="freq-link"
    id=""
    title="Update a variety of synthetic monitors"
  >
  
  ### Update scripted API monitors

  ```
  SOMETHING
  ```

  ### Update scripted browser monitors

  ```
  SOMETHING
  ```

  ### Update simple browser monitors

  ```
  mutation {
    syntheticsUpdateBrokenLinksMonitor (
      guid: "<ENTITY_GUID>", 
      monitor: {
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
        }, 
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        status: <STATUS>, 
        tags: {
          key: "", 
          values: ""
        }, 
        uri: "<MONITORED_URI>"
      }
    ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Update certificate check monitors

      ```
    mutation {
      syntheticsUpdateCertCheckMonitor (
        guid: "<ENTITY_GUID>", 
        monitor: {
          domain: "<DOMAIN>", 
          locations: {
            public: ["<LOCATION_1>", "<LOCATION_2>"]
          },  
          name: "<MONITOR_NAME>", 
          numberDaysToFailBeforeCertExpires: <DAYS_UNTIL_EXPIRATION>, 
          period: <PERIOD>, 
          status: <STATUS> 
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```

  ### Update simple ping monitors

    ```
  mutation {
    syntheticsUpdateSimpleMonitor (
      guid: "<ENTITY_GUID>", 
      monitor: {
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
        },  
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        status: <STATUS>, 
        uri: "<MONITORED_URI", 
        advancedOptions: {
          customHeaders: {
            name: "<HEADER_NAME>", 
            value: "<HEADER_VALUE>"
          }, 
          redirectIsFailure: <REDIRECT_IS_FAILURE>, 
          responseValidationText: "<VALIDATION_TEXT>", 
          shouldBypassHeadRequest: <BYPASS_HEAD_REQUEST>, 
          useTlsValidation: <TLS_VALIDATION>
        }
      }
    ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Update step monitors
  ```
  SOMETHING
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id=""
    title="Delete monitors"
  >

  Replace ```ENTITY_GUID``` with the entity GUID of the monitor to delete.

  ```
  mutation {
    syntheticsDeleteMonitor (
      guid: "<ENTITY_GUID>"
      ) {
      errors {
        description
      }
    }
  }
  ```
  ### Scripted API monitors

  ```
  SOMETHING
  ```

  </Collapser>
</CollapserGroup>

## Manage your private locations

A [private location](https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/private-locations/priv[â€¦]locations-overview-monitor-internal-sites-add-new-locations/) allows you to monitor applications behind your firewall. When you create a private location, you install and configure private minions to execute the monitors assigned to that private location. 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="private-location"
    title="Create a private location"
  >

  Replace ```NR_ACCOUNT_ID``` with the New Relic account ID where the private location should be created.

  ```
  mutation{
    syntheticsCreatePrivateLocation (
      accountId: ```NR_ACCOUNT_ID```,
      name: "PrivateLocationName",
      description: "Optional description",
      verifiedScriptExecution: false
    ) {
      guid
      errors {
        description
        type
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="private-location"
    title="Update a private location"
  >

  Only the description and verified script execution settings can be changed. Replace ```ENTITY_GUID``` with the entity GUID for the private location entity.

  ```
  mutation {
    syntheticsUpdatePrivateLocation (
      guid: "<ENTITY_GUID>",     
      description: "My new description", 
      verifiedScriptExecution: true
    ) {
    description
    verifiedScriptExecution
    errors {
      description
      type
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="delete-private locations"
    title="Delete a private location"
  >
  Replace ```ENTITY_GUID``` with the entity GUID for the private location entity.

  ```
  mutation {
    syntheticsDeletePrivateLocation (
      guid: "<ENTITY_GUID>"
      ) {
      errors {
        description
        type
      }
    }
  }
  ```
  </Collapser>
  <Collapser
    className="freq-link"
    id="purge-private-location"
    title="Purge a private location job queue"
  >
  Replace ```ENTITY_GUID``` with the entity GUID for the private location entity.

  ```
  mutation {
    syntheticsPurgePrivateLocationQueue (
      guid: "<ENTITY_GUID>"
      ) {
      errors {
        description
        type
      }
    }
  }
  ```
  </Collapser>
</CollapserGroup>

## Manage your secure credentials

You use [secure credentials](https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/using-monitors/store-secure-credentials-scripted-browsers-api-tests/) when storing, protecting, and centrally managing protected information used by your monitors, like passwords, API keys, or encoded certificates. Using NerdGraph allows you to programmatically change the values of your secure credentials if you need to reset any credentials for any reason.

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="secure-credential"
    title="Create a secure credential"
  >
  Replace ```NR_ACCOUNT_ID``` with your account ID, ```KEY_ALL_CAPS``` with the secure credential name, and ```VALUE``` with the secure credential value.

  ```
  mutation {
    syntheticsCreateSecureCredential (
      accountId: <NR_ACCOUNT_ID>, 
      description: "Optional description", 
      key: "<KEY_ALL_CAPS>", 
      value: "<VALUE>"
      ) {
      errors {
        description
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="update-secure"
    title="Update a secure credential"
  >
  Replace ```NR_ACCOUNT_ID``` with your account ID, ```KEY_ALL_CAPS``` with the existing secure credential name, and ```VALUE``` with the secure credential value.

  ```
  mutation {
    syntheticsUpdateSecureCredential (
      accountId: <NR_ACCOUNT_ID>, 
      description: "Optional description", 
      key: "<KEY_ALL_CAPS>, 
      value: "<VALUE>") {
      createdAt
      lastUpdate
      errors {
        description
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="secure-credential"
    title="Delete a secure credential"
  >
  Replace ```NR_ACCOUNT_ID``` with your account ID and ```KEY_ALL_CAPS``` with the existing secure credential name.

  ```
  mutation {
    syntheticsDeleteSecureCredential (
      accountId: <NR_ACCOUNT_ID>, 
      key: "<KEY_ALL_CAPS>"
      ) {
      errors {
        description
      }
    }
  }
  ```
  </Collapser>
</CollapserGroup>
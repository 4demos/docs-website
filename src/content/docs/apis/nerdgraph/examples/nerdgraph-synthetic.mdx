---
title: Synthetics NerdGraph draft
tags:
    - NerdGraph
    - Synthetic
metaDescription: 
---

This document provides examples of how to use New Relic NerdGraph to query and modify your synthetic monitor and synthetic private location configurations. 

These examples for querying and modifying synthetics configuration data use GraphQL queries and mutations:

- Queries: requests that are intended to only fetch data
- Mutations: requests that create or update data on the server

**Requirements** 
Before querying cloud integration data with NerdGraph, ensure you have:

- Followed the instructions to connect cloud integrations with New Relic.
- Created an API key.
- Access the NerdGraph GraphiQL explorer

To access the NerdGraph GraphiQL explorer:

Go to <var>api.newrelic.com/graphiql</var> > Input any of the examples below.

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
      SOMETHING
      </th>
      <th>
      Explanation
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        DAYS_UNTIL_EXPIRATION
      </td>
      <td>
        The number of days prior to expiration when the monitor should start failing, providing proactive notification when certificate updates are required
      </td>
    </tr>
    
    <tr>
      <td>
        DOMAIN
      </td>
      <td>
        The domain to check (for example, <var>newrelic.com</var>)
      </td>
    </tr>

    <tr>
      <td>
        HEADER_NAME (optional)
      </td>
      <td>
        Used when creating simple ping monitors or simple browser. Custom header names to include on the request
      </td>
    </tr>

    <tr>
      <td>
        HEADER_VALUE (optional)
      </td>
      <td>
        Used when creating simple ping monitors. Custom header values to include on the request
      </td>
    </tr>

    <tr>
      <td>
        LOCATION
      </td>
      <td>
        An array of location names where the monitor should execute. Both public and private locations can be assigned.
      </td>
    </tr>
        
    <tr>
      <td>
        PERIOD
      </td>
      <td>
        The frequency or execution period of the monitor
      </td>
    </tr>
        
    <tr>
      <td>
        STATUS
      </td>
      <td>
        Should the monitor be ENABLED, DISABLED, or MUTED. 
      </td>
    </tr>
        
    <tr>
      <td>
        TAGS (optional)
      </td>
      <td>
        Tag name / value pairs can be added to the monitor at creation
      </td>
    </tr>

    <tr>
      <td>
        <var>YOUR_ACCOUNT_ID</var>
      </td>
      <td>
        The New Relic account where the monitor should be created
      </td>
    </tr>

    <tr>
      <td>
        <var>YOUR_MONITOR_NAME</var>
      </td>
      <td>
        The name for the monitor
      </td>
    </tr>

    <tr>
      <td>
        <var>YOUR_MONITORED_URI</var>
      </td>
      <td>
        The URI to monitor for broken links
      </td>
    </tr>
    
  </tbody>
</table>

## Query examples
Queries are requests that are intended to only fetch data (no side effects). Queries in NerdGraph are not static, meaning that you can ask for more or less data depending on your needs. For each query, you can specify exactly what data you want to retrieve, as long as it is supported by the schema.

These are simplified examples that help query different synthetic entity types. Additional query capabilities are explained in our NerdGraph Entities API tutorial. 

 <CollapserGroup>
  <Collapser
    className="freq-link"
    id="query-examples"
    title="Query monitors"
  >
```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR'") {
      results {
        entities {
          ... on SyntheticMonitorEntityOutline {
            guid
            name
            accountId
            monitorType
            tags {
              key
              values
            }
          }
        }
      }
    }
  }
}
``` 
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="private-examples"
    title="Query private locations"
  >
```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'") {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
``` 

  </Collapser>
</CollapserGroup>

 <CollapserGroup>
  <Collapser
    className="freq-link"
    id="credentials-example"
    title="Query secure credentials
"
  >

  <Callout variant="important">
Secure credential values cannot be retrieved via the API or UI. Only metadata can be retrieved.

  </Callout>

```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'SECURE_CRED'") {
      results {
        entities {
          ... on SecureCredentialEntityOutline {
            accountId
            guid
            name
            tags {
              key
              values
            }
            updatedAt
          }
        }
      }
    }
  }
}
```
  </Collapser>
</CollapserGroup>

## Monitor mutation examples

Mutations are requests that are intended to have side effects, such as creating or updating data on the server. Mutations require the keyword mutation and the name of the mutation. NerdGraph mutations are restricted to a subset of all possible mutations.

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
      BETTER NAME
      </th>
    </tr>
  </thead>

    <tbody>
    <tr>
      <td>
        **Private locations** use the entity GUID of the private location. Include a `<vsePassword>` attribute if verified script execution is enabled for your private locations. 
      </td>
      <td>
        ```
        locations: {
          private: {
            guid: "<LOCATION_ENTITY_GUID>", 
              vsePassword: "<VSE_PASSWORD>"
          }
        }
        ```
      </td>
    </tr>

    <tr>
      <td>
        **Public locations** use the location identifier without `AWS_`. 
      </td>
      <td>
        ``` 
        locations: {
          public: ["US_EAST_2", "US_WEST_1"]
        }
        ```
      </td>
    </tr>

    <tr>
      <td>
        **Periods** define intervals. In the examples, replace X with the number of minutes or hours your monitor would run. For a 30 minute interval, it would read <var>EVERY_30_MINUTES</var>. 
      </td>
      <td>
        - EVERY_MINUTE
        - EVERY_X_MINUTES
        - EVERY_HOUR
        - EVERY_X_HOURS
        - EVERY_DAY
      </td>
    </tr>
    </tbody>
  </table> 

Tags are optional and can be added during monitor creation or later using tagging NerdGraph calls or the UI. Multiple tags can be added in a single mutation call using an array containing keys and values.

```
Populate mutation examples, each in a collapser. Each of these heading 3 items should be a separate collapser in this section.
```

## Create a broken links monitor

NR_ACCOUNT_ID: The New Relic account where the monitor should be created
LOCATIONS: An array of location names where the monitor should execute. Both public and private locations can be assigned.
MONITOR_NAME: The name for the monitor
PERIOD: The frequency or execution period of the monitor
STATUS: Should the monitor be ENABLED, DISABLED, or MUTED. 
MONITORED_URI: The URI to monitor for broken links
TAGS (OPTIONAL): Tag name / value pairs can be added to the monitor at creation

```
mutation {
  syntheticsCreateBrokenLinksMonitor (
    accountId: <NR_ACCOUNT_ID>, 
    monitor: {
      locations: {
        public: ["<LOCATION_1>", "<LOCATION_2>"]
        }, 
      name: "<MONITOR_NAME>", 
      period: <PERIOD>, 
      status: <STATUS>, 
      uri: "<MONITORED_URI>", 
      tags: {
        key: "<TAG_NAME>", 
        values: "<TAG_VALUE>"
        }
      }
    ) {
      errors {
        description
        type
      }
  }
}
```

Create a certificate check monitor
NR_ACCOUNT_ID: The New Relic account where the monitor should be created
LOCATIONS: An array of location names where the monitor should execute. Both public and private locations can be assigned.
MONITOR_NAME: The name for the monitor
PERIOD: The frequency or execution period of the monitor
STATUS: Should the monitor be ENABLED, DISABLED, or MUTED. 
DOMAIN: The domain to check (ex: newrelic.com)
DAYS_UNTIL_EXPIRATION: The number of days prior to expiration when the monitor should start failing, providing proactive notification when certificate updates are required
TAGS (OPTIONAL): Tag name / value pairs can be added to the monitor at creation

```
mutation {
  syntheticsCreateCertCheckMonitor (
    accountId: <NR_ACCOUNT_ID>, 
    monitor: {
      domain: "<DOMAIN>", 
      locations: {
        public: ["<LOCATION_1>", "<LOCATION_2>"]
        },
      name: "<MONITOR_NAME>", 
      numberDaysToFailBeforeCertExpires: <DAYS_UNTIL_EXPIRATION>, 
      period: <PERIOD>, 
      status: <STATUS>
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

## Create a ping (simple) monitor
Advanced options, including custom headers, redirect is failure, response validation text, bypassing the HEAD request, and TLS validation are all optional.

NR_ACCOUNT_ID: The New Relic account where the monitor should be created
LOCATIONS: An array of location names where the monitor should execute. Both public and private locations can be assigned.
MONITOR_NAME: The name for the monitor
PERIOD: The frequency or execution period of the monitor
STATUS: Should the monitor be ENABLED, DISABLED, or MUTED. 
MONITORED_URI: The URI to request
TAGS (OPTIONAL): Tag name / value pairs can be added to the monitor at creation
HEADER_NAME (OPTIONAL): Custom header names to include on the request
HEADER_VALUE (OPTIONAL): Custom header values to include on the request
REDIRECT_IS_FAILURE (OPTIONAL): Fail if redirected (true/false)
VALIDATION_TEXT (OPTIONAL): Fail if this text is not included in the response
TLS_VALIDATION (OPTIONAL): Verify the validity of the SSL certificate chain (true/false) 

```
mutation {
  syntheticsCreateSimpleMonitor (
    accountId: <NR_ACCOUNT_ID>, 
    monitor: {
      locations: {
        public: ["<LOCATION_1>", "<LOCATION_2>"]
        }, 
      name: "<MONITOR_NAME>", 
      period: <PERIOD>, 
      status: <STATUS>, 
      uri: "<MONITORED_URI>", 
      advancedOptions: {
        customHeaders: {
          name: "<HEADER_NAME>", 
          value: "<HEADER_VALUE>"
        }, 
        redirectIsFailure: <REDIRECT_IS_FAILURE>, 
        responseValidationText: "<VALIDATION_TEXT>", 
        shouldBypassHeadRequest: <BYPASS_HEAD_REQUEST>, 
        useTlsValidation: <TLS_VALIDATION>
       }
     }
 ) {
    errors {
      description
      type
    }
  }
}
```

## Create a scripted API monitor

NR_ACCOUNT_ID: The New Relic account where the monitor should be created
LOCATIONS: An array of location names where the monitor should execute. Both public and private locations can be assigned.
MONITOR_NAME: The name for the monitor
PERIOD: The frequency or execution period of the monitor
SCRIPT_CONTENT: The contents of the API script. This should NOT be base64 encoded.
STATUS: Should the monitor be ENABLED, DISABLED, or MUTED. 
TAGS (OPTIONAL): Tag name / value pairs can be added to the monitor at creation

```
mutation {
  syntheticsCreateScriptApiMonitor (
    accountId: <NR_ACCOUNT_ID>, 
    monitor: {
      locations: {
        public: ["<LOCATION_1>", "<LOCATION_2>"]
        }, 
     name: "<MONITOR_NAME>", 
     period: <PERIOD>, 
     script: "<SCRIPT_CONTENT>", 
     status: <STATUS>
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

Create a scripted browser monitor
NR_ACCOUNT_ID: The New Relic account where the monitor should be created
BROWSER_TYPE: The browser to use. “CHROME” is the only accepted value.
BROWSER_VERSION: The version of the browser to use. 97 is the only accepted value.
LOCATIONS: An array of location names where the monitor should execute. Both public and private locations can be assigned.
MONITOR_NAME: The name for the monitor
PERIOD: The frequency or execution period of the monitor
SCRIPT_CONTENT: The contents of the scripted browser script. This should NOT be base64 encoded.
SCRIPT_LANGUAGE: The scripting language to use. JAVASCRIPT is the only accepted value
STATUS: Should the monitor be ENABLED, DISABLED, or MUTED. 
TAGS (OPTIONAL): Tag name / value pairs can be added to the monitor at creation
ENABLE_SCREENSHOT (OPTIONAL): Disable screenshots on failure (true/false)

```
mutation {
  syntheticsCreateScriptBrowserMonitor (
    accountId: <NR_ACCOUNT_ID>, 
    monitor: { 
      browserType: "<BROWSER_TYPE>", 
      browserVersion: <BROWSER_VERSION>, 
      locations: {
        public: ["<LOCATION_1>", "<LOCATION_2>"]
        }, 
      name: "<MONITOR_NAME>", 
      period: <PERIOD>, 
      script: "<SCRIPT_CONTENT>", 
      scriptLanguage: "<SCRIPT_LANGUAGE>", 
      status: <STATUS>, 
      advancedOptions: {
        enableScreenshotOnFailureAndScript: false
      }
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

Create a simple browser monitor
NR_ACCOUNT_ID: The New Relic account where the monitor should be created
BROWSER_TYPE: The browser to use. “CHROME” is the only accepted value.
BROWSER_VERSION: The version of the browser to use. 97 is the only accepted value.
LOCATIONS: An array of location names where the monitor should execute. Both public and private locations can be assigned.
MONITOR_NAME: The name for the monitor
PERIOD: The frequency or execution period of the monitor
SCRIPT_LANGUAGE: The scripting language to use. JAVASCRIPT is the only accepted value
STATUS: Should the monitor be ENABLED, DISABLED, or MUTED. 
MONITORED_URI: The URI to request
TAGS (OPTIONAL): Tag name / value pairs can be added to the monitor at creation
HEADER_NAME (OPTIONAL): Custom header names to include on the request
HEADER_VALUE (OPTIONAL): Custom header values to include on the request
ENABLE_SCREENSHOT (OPTIONAL): Disable screenshots on failure (true/false)
VALIDATION_TEXT (OPTIONAL): Fail if this text is not included in the response
TLS_VALIDATION (OPTIONAL): Verify the validity of the SSL certificate chain (true/false)

```
mutation {
  syntheticsCreateSimpleBrowserMonitor (
    accountId: <NR_ACCOUNT_ID>, 
    monitor: {
      browserType: "<BROWSER_TYPE>", 
      browserVersion: <BROWSER_VERSION>, 
      locations: {
        public: ["<LOCATION_1>", "<LOCATION_2>"]
        }, 
      name: "<MONITOR_NAME>", 
      period: <PERIOD>, 
      scriptLanguage: "<SCRIPT_LANGUAGE>", 
      status: <STATUS>, 
      uri: "<MONITORED_URI>", 
      advancedOptions: {
        customHeaders: {
          name: "<HEADER_NAME>", 
          value: "<HEADER_VALUE>"
        }, 
        enableScreenshotOnFailureAndScript: <ENABLE_SCREENSHOT>, 
        responseValidationText: "<VALIDATION_TEXT>", 
        useTlsValidation: <TLS_VALIDATION>
      }
    ) {
    errors {
      description
      type
    }
  }
}
```

Create a step monitor

All update mutations require the use of the entity GUID. All other fields are optional. Only include fields that need to be modified. 
Update a broken links monitor
ENTITY_GUID: The entity GUID for the monitor entity
LOCATIONS: An array of location names where the monitor should execute. Both public and private locations can be assigned.
MONITOR_NAME: The name for the monitor
PERIOD: The frequency or execution period of the monitor
STATUS: Should the monitor be ENABLED, DISABLED, or MUTED. 
MONITORED_URI: The URI to monitor for broken links
TAGS (OPTIONAL): Tag name / value pairs can be added to the monitor

```
mutation {
  syntheticsUpdateBrokenLinksMonitor (
    guid: "<ENTITY_GUID>", 
    monitor: {
      locations: {
        public: ["<LOCATION_1>", "<LOCATION_2>"]
      }, 
      name: "<MONITOR_NAME>", 
      period: <PERIOD>, 
      status: <STATUS>, 
      tags: {
        key: "", 
        values: ""
      }, 
      uri: "<MONITORED_URI>"
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

Update a certificate check monitor
ENTITY_GUID: The entity GUID for the monitor entity
LOCATIONS: An array of location names where the monitor should execute. Both public and private locations can be assigned.
MONITOR_NAME: The name for the monitor
PERIOD: The frequency or execution period of the monitor
STATUS: Should the monitor be ENABLED, DISABLED, or MUTED. 
DOMAIN: The domain to check (ex: newrelic.com)
DAYS_UNTIL_EXPIRATION: The number of days prior to expiration when the monitor should start failing, providing proactive notification when certificate updates are required
TAGS (OPTIONAL): Tag name / value pairs can be added to the monitor

```
mutation {
  syntheticsUpdateCertCheckMonitor (
    guid: "<ENTITY_GUID>", 
    monitor: {
      domain: "<DOMAIN>", 
      locations: {
        public: ["<LOCATION_1>", "<LOCATION_2>"]
      },  
      name: "<MONITOR_NAME>", 
      numberDaysToFailBeforeCertExpires: <DAYS_UNTIL_EXPIRATION>, 
      period: <PERIOD>, 
      status: <STATUS> 
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

Update a ping (simple) monitor
ENTITY_GUID: The entity GUID for the monitor entity
LOCATIONS: An array of location names where the monitor should execute. Both public and private locations can be assigned.
MONITOR_NAME: The name for the monitor
PERIOD: The frequency or execution period of the monitor
STATUS: Should the monitor be ENABLED, DISABLED, or MUTED. 
MONITORED_URI: The URI to request
TAGS (OPTIONAL): Tag name / value pairs can be added to the monitor at creation
HEADER_NAME (OPTIONAL): Custom header names to include on the request
HEADER_VALUE (OPTIONAL): Custom header values to include on the request
REDIRECT_IS_FAILURE (OPTIONAL): Fail if redirected (true/false)
VALIDATION_TEXT (OPTIONAL): Fail if this text is not included in the response
TLS_VALIDATION (OPTIONAL): Verify the validity of the SSL certificate chain (true/false) 

```
mutation {
  syntheticsUpdateSimpleMonitor (
    guid: "<ENTITY_GUID>", 
    monitor: {
      locations: {
        public: ["<LOCATION_1>", "<LOCATION_2>"]
      },  
      name: "<MONITOR_NAME>", 
      period: <PERIOD>, 
      status: <STATUS>, 
      uri: "<MONITORED_URI", 
      advancedOptions: {
        customHeaders: {
          name: "<HEADER_NAME>", 
          value: "<HEADER_VALUE>"
        }, 
        redirectIsFailure: <REDIRECT_IS_FAILURE>, 
        responseValidationText: "<VALIDATION_TEXT>", 
        shouldBypassHeadRequest: <BYPASS_HEAD_REQUEST>, 
        useTlsValidation: <TLS_VALIDATION>
      }
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

Update a scripted API monitor

Update a scripted browser monitor

Update a simple browser monitor

Update a step monitor

Delete monitor
Replace ```<ENTITY_GUID>``` with the entity GUID of the monitor to delete.

```
mutation {
  syntheticsDeleteMonitor (
    guid: "<ENTITY_GUID>"
    ) {
    errors {
      description
    }
  }
}
```

Private location mutation examples
These mutations allow you to create, update, delete, or purge the queue for a synthetics private location. 

Create a private location

Replace ```<NR_ACCOUNT_ID>``` with the New Relic account ID where the private location should be created.

```
mutation{
  syntheticsCreatePrivateLocation (
    accountId: <NR_ACCOUNT_ID>,
    name: "PrivateLocationName",
    description: "Optional description",
    verifiedScriptExecution: false
  ) {
    guid
    errors {
      description
      type
    }
  }
}
```

Update a private location

Only the description and verified script execution settings can be changed. Replace ```<ENTITY_GUID>``` with the entity GUID for the private location entity.

```
mutation {
  syntheticsUpdatePrivateLocation (
    guid: "<ENTITY_GUID>",     
    description: "My new description", 
    verifiedScriptExecution: true
  ) {
  description
  verifiedScriptExecution
  errors {
    description
    type
    }
  }
}
```

Delete a private location
Replace ```<ENTITY_GUID>``` with the entity GUID for the private location entity.

```
mutation {
  syntheticsDeletePrivateLocation (
    guid: "<ENTITY_GUID>"
    ) {
    errors {
      description
      type
    }
  }
}
```

Purge a private location job queue
Replace ```<ENTITY_GUID>``` with the entity GUID for the private location entity.

```
mutation {
  syntheticsPurgePrivateLocationQueue (
    guid: "<ENTITY_GUID>"
    ) {
    errors {
      description
      type
    }
  }
}
```

Secure credential mutation examples
Create a secure credential
Replace ```<NR_ACCOUNT_ID>``` with your account ID, ```<KEY_ALL_CAPS>``` with the secure credential name, and ```<VALUE>``` with the secure credential value.

```
mutation {
  syntheticsCreateSecureCredential (
    accountId: <NR_ACCOUNT_ID>, 
    description: "Optional description", 
    key: "<KEY_ALL_CAPS>", 
    value: "<VALUE>"
    ) {
    errors {
      description
    }
  }
}
```

Update a secure credential
Replace ```<NR_ACCOUNT_ID>``` with your account ID, ```<KEY_ALL_CAPS>``` with the existing secure credential name, and ```<VALUE>``` with the secure credential value.

```
mutation {
  syntheticsUpdateSecureCredential (
    accountId: <NR_ACCOUNT_ID>, 
    description: "Optional description", 
    key: "<KEY_ALL_CAPS>, 
    value: "<VALUE>") {
    createdAt
    lastUpdate
    errors {
      description
    }
  }
}
```

Delete a secure credential
Replace ```<NR_ACCOUNT_ID>``` with your account ID and ```<KEY_ALL_CAPS>``` with the existing secure credential name.

```
mutation {
  syntheticsDeleteSecureCredential (
    accountId: <NR_ACCOUNT_ID>, 
    key: "<KEY_ALL_CAPS>"
    ) {
    errors {
      description
    }
  }
}
```
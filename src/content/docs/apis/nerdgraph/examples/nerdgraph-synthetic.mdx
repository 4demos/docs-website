---
title: Synthetics NerdGraph draft
tags:
    - NerdGraph
    - Synthetic
metaDescription: 
---

You can now manage your synthetic monitors in NerdGraph. You can automate creating, updating, configuring, and deleting your monitors. You can also:

* Manage your certificate check monitors, broken links monitors, and step monitors, not previously supported through REST APIs.
* Simplify the creation of scripted monitors.
* Attach scripts to scripted monitors with only one call, rather than four with REST APIs.
* Add tags to your monitors. 

The scripts are a good starting point to query and modify your synthetic monitors. With [queries](#query), you can make requests that fetch data retrieved by your monitors. With [mutations](#mutation), you can (SOMETHING).

If you've never used NerdGraph and need a more thorough tutorial, we recommend reading our [Intro to NerdGraph](https://docs.newrelic.com/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/) doc. 

## Use queries to retrieve data [#query]

Queries make requests to fetch data. Queries in NerdGraph allow you to modify the amount of data retrieved in a query, depending on your needs and if it's supported by the schema. You can read our [NerdGraph entities API tutorial]() to learn additional query capabilities available to your synthetic monitors. 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="query-examples"
    title="Query monitors"
  >
```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR'") {
      results {
        entities {
          ... on SyntheticMonitorEntityOutline {
            guid
            name
            accountId
            monitorType
            tags {
              key
              values
            }
          }
        }
      }
    }
  }
}
``` 
  </Collapser>

  <Collapser
    className="freq-link"
    id="private-examples"
    title="Query private locations"
  >
```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'") {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
``` 

  </Collapser>

  <Collapser
    className="freq-link"
    id="credentials-example"
    title="Query secure credentials
"
  >

  <Callout variant="important">
Secure credential values cannot be retrieved via the API or UI. Only metadata can be retrieved.
  </Callout>

```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'SECURE_CRED'") {
      results {
        entities {
          ... on SecureCredentialEntityOutline {
            accountId
            guid
            name
            tags {
              key
              values
            }
            updatedAt
          }
        }
      }
    }
  }
}
```
  </Collapser>
</CollapserGroup>

## Manage your synthetic monitors [#mutation]

Mutations are dynamic requests that create or update data on the server, rather than a query's simple data retrieval. Mutations require the keyword mutation and the name of the mutation. NerdGraph mutations are restricted to a subset of all possible mutations.

<CollapserGroup>
  <Collapser
    className="freq-link"
    id=""
    title="Create monitors"
  >
  
  ### Scripted API monitors

    ```
  mutation {
    syntheticsCreateScriptApiMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: {
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          }, 
      name: "<MONITOR_NAME>", 
      period: <PERIOD>, 
      script: "<SCRIPT_CONTENT>", 
      status: <STATUS>
      }
    ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Broken links monitors

  ```
  mutation {
    syntheticsCreateBrokenLinksMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: {
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          }, 
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        status: <STATUS>, 
        uri: "<MONITORED_URI>", 
        tags: {
          key: "<TAG_NAME>", 
          values: "<TAG_VALUE>"
          }
        }
      ) {
        errors {
          description
          type
        }
    }
  }
  ```

  ### Scripted browser monitors

    ```
  mutation {
    syntheticsCreateScriptBrowserMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: { 
        browserType: "<BROWSER_TYPE>", 
        browserVersion: <BROWSER_VERSION>, 
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          }, 
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        script: "<SCRIPT_CONTENT>", 
        scriptLanguage: "<SCRIPT_LANGUAGE>", 
        status: <STATUS>, 
        advancedOptions: {
          enableScreenshotOnFailureAndScript: false
        }
      }
    ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Simple browser monitors

  ```
  mutation {
    syntheticsCreateSimpleBrowserMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: {
        browserType: "<BROWSER_TYPE>", 
        browserVersion: <BROWSER_VERSION>, 
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          }, 
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        scriptLanguage: "<SCRIPT_LANGUAGE>", 
        status: <STATUS>, 
        uri: "<MONITORED_URI>", 
        advancedOptions: {
          customHeaders: {
            name: "<HEADER_NAME>", 
            value: "<HEADER_VALUE>"
          }, 
          enableScreenshotOnFailureAndScript: <ENABLE_SCREENSHOT>, 
          responseValidationText: "<VALIDATION_TEXT>", 
          useTlsValidation: <TLS_VALIDATION>
        }
      ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Certificate check monitors

    ```
  mutation {
    syntheticsCreateCertCheckMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: {
        domain: "<DOMAIN>", 
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          },
        name: "<MONITOR_NAME>", 
        numberDaysToFailBeforeCertExpires: <DAYS_UNTIL_EXPIRATION>, 
        period: <PERIOD>, 
        status: <STATUS>
      }
    ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Simple ping monitors

    ```
  mutation {
    syntheticsCreateSimpleMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: {
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          }, 
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        status: <STATUS>, 
        uri: "<MONITORED_URI>", 
        advancedOptions: {
          customHeaders: {
            name: "<HEADER_NAME>", 
            value: "<HEADER_VALUE>"
          }, 
          redirectIsFailure: <REDIRECT_IS_FAILURE>, 
          responseValidationText: "<VALIDATION_TEXT>", 
          shouldBypassHeadRequest: <BYPASS_HEAD_REQUEST>, 
          useTlsValidation: <TLS_VALIDATION>
        }
      }
  ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Step monitors

  </Collapser>
  <Collapser
    className="freq-link"
    id=""
    title="Update monitors"
  >
  
  ### Scripted API monitors

  ```
  SOMETHING
  ```

  ### Scripted browser monitors

  ```
  SOMETHING
  ```

  ### Simple browser monitors

  ```
  mutation {
    syntheticsUpdateBrokenLinksMonitor (
      guid: "<ENTITY_GUID>", 
      monitor: {
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
        }, 
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        status: <STATUS>, 
        tags: {
          key: "", 
          values: ""
        }, 
        uri: "<MONITORED_URI>"
      }
    ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Certificate check monitors

      ```
    mutation {
      syntheticsUpdateCertCheckMonitor (
        guid: "<ENTITY_GUID>", 
        monitor: {
          domain: "<DOMAIN>", 
          locations: {
            public: ["<LOCATION_1>", "<LOCATION_2>"]
          },  
          name: "<MONITOR_NAME>", 
          numberDaysToFailBeforeCertExpires: <DAYS_UNTIL_EXPIRATION>, 
          period: <PERIOD>, 
          status: <STATUS> 
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```

  ### Simple ping monitors

    ```
  mutation {
    syntheticsUpdateSimpleMonitor (
      guid: "<ENTITY_GUID>", 
      monitor: {
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
        },  
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        status: <STATUS>, 
        uri: "<MONITORED_URI", 
        advancedOptions: {
          customHeaders: {
            name: "<HEADER_NAME>", 
            value: "<HEADER_VALUE>"
          }, 
          redirectIsFailure: <REDIRECT_IS_FAILURE>, 
          responseValidationText: "<VALIDATION_TEXT>", 
          shouldBypassHeadRequest: <BYPASS_HEAD_REQUEST>, 
          useTlsValidation: <TLS_VALIDATION>
        }
      }
    ) {
      errors {
        description
        type
      }
    }
  }
  ```

  ### Step monitors

  </Collapser>
  <Collapser
    className="freq-link"
    id=""
    title="Delete monitors"
  >

  Replace ```<ENTITY_GUID>``` with the entity GUID of the monitor to delete.

  ```
  mutation {
    syntheticsDeleteMonitor (
      guid: "<ENTITY_GUID>"
      ) {
      errors {
        description
      }
    }
  }
  ```
  ### Scripted API monitors

  ```
  SOMETHING
  ```

  </Collapser>
</CollapserGroup>

## Manage your private locations

These mutations allow you to create, update, delete, or purge the queue for a synthetics private location. 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="private-location"
    title="Create a private location"
  >

  Replace ```<NR_ACCOUNT_ID>``` with the New Relic account ID where the private location should be created.

  ```
  mutation{
    syntheticsCreatePrivateLocation (
      accountId: ```NR_ACCOUNT_ID```,
      name: "PrivateLocationName",
      description: "Optional description",
      verifiedScriptExecution: false
    ) {
      guid
      errors {
        description
        type
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="private-location"
    title="Update a private location"
  >

  Only the description and verified script execution settings can be changed. Replace ```<ENTITY_GUID>``` with the entity GUID for the private location entity.

  ```
  mutation {
    syntheticsUpdatePrivateLocation (
      guid: "<ENTITY_GUID>",     
      description: "My new description", 
      verifiedScriptExecution: true
    ) {
    description
    verifiedScriptExecution
    errors {
      description
      type
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="delete-private locations"
    title="Delete a private location"
  >
  Replace ```<ENTITY_GUID>``` with the entity GUID for the private location entity.

  ```
  mutation {
    syntheticsDeletePrivateLocation (
      guid: "<ENTITY_GUID>"
      ) {
      errors {
        description
        type
      }
    }
  }
  ```
  </Collapser>
  <Collapser
    className="freq-link"
    id="purge-private-location"
    title="Purge a private location job queue"
  >
  Replace ```<ENTITY_GUID>``` with the entity GUID for the private location entity.

  ```
  mutation {
    syntheticsPurgePrivateLocationQueue (
      guid: "<ENTITY_GUID>"
      ) {
      errors {
        description
        type
      }
    }
  }
  ```
  </Collapser>
</CollapserGroup>

## Manage your secure credentials

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="secure-credential"
    title="Create a secure credential"
  >
  Replace ```<NR_ACCOUNT_ID>``` with your account ID, ```<KEY_ALL_CAPS>``` with the secure credential name, and ```<VALUE>``` with the secure credential value.

  ```
  mutation {
    syntheticsCreateSecureCredential (
      accountId: <NR_ACCOUNT_ID>, 
      description: "Optional description", 
      key: "<KEY_ALL_CAPS>", 
      value: "<VALUE>"
      ) {
      errors {
        description
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="update-secure"
    title="Update a secure credential"
  >
  Replace ```<NR_ACCOUNT_ID>``` with your account ID, ```<KEY_ALL_CAPS>``` with the existing secure credential name, and ```<VALUE>``` with the secure credential value.

  ```
  mutation {
    syntheticsUpdateSecureCredential (
      accountId: <NR_ACCOUNT_ID>, 
      description: "Optional description", 
      key: "<KEY_ALL_CAPS>, 
      value: "<VALUE>") {
      createdAt
      lastUpdate
      errors {
        description
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="secure-credential"
    title="Delete a secure credential"
  >
  Replace ```<NR_ACCOUNT_ID>``` with your account ID and ```<KEY_ALL_CAPS>``` with the existing secure credential name.

  ```
  mutation {
    syntheticsDeleteSecureCredential (
      accountId: <NR_ACCOUNT_ID>, 
      key: "<KEY_ALL_CAPS>"
      ) {
      errors {
        description
      }
    }
  }
  ```
  </Collapser>
</CollapserGroup>
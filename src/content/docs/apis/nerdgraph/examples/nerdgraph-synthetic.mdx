---
title: "NerdGraph tutorial: Manage your synthetic monitors"
tags:
    - NerdGraph
    - Synthetic
metaDescription: Use NerdGraph to programatically manage your synthetic monitors, private locations, and secure credentials.
---

With NerdGraph, you can automate creating, updating, configuring, or deleting your synthetic monitors. Using NerdGraph gives you:

* Management of your certificate check monitors, broken links monitors, and step monitors, not previously supported through REST APIs.
* Simplified processes for creating scripted monitors.
* The ability to attach scripts to scripted monitors with only one call, rather than the four calls needed with REST APIs.
* The ability to add tags to your monitors. 

If you've never used NerdGraph, read [Intro to NerdGraph](https://docs.newrelic.com/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/) for a more thorough tutorial. 

## Use queries to retrieve data [#query]

Queries make requests to fetch data. Queries in NerdGraph allow you to modify the amount of data retrieved in a query, depending on your needs and if it's supported by the schema. Check out our [NerdGraph entities API tutorial](https://docs.newrelic.com/docs/apis/nerdgraph/examples/nerdgraph-entities-api-tutorial/) to learn additional query capabilities available to your synthetic monitors. 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="query-examples"
    title="Query monitors"
  >

  You query your synthetic monitors to get either current status information about your data or details about the monitor configuration. Some query examples include: 

```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR'") {
      results {
        entities {
          ... on SyntheticMonitorEntityOutline {
            guid
            name
            accountId
            monitorType
            tags {
              key
              values
            }
          }
        }
      }
    }
  }
}
``` 
  </Collapser>

  <Collapser
    className="freq-link"
    id="private-examples"
    title="Query private locations"
  >

  You're able to similarly query your private locations:

```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'") {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
``` 

  </Collapser>

  <Collapser
    className="freq-link"
    id="credentials-example"
    title="Query secure credentials
"
  >

  Querying secure credentials differs from querying your monitors or private locations by only allowing you to retrieve metadata, not credential values. 

```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'SECURE_CRED'") {
      results {
        entities {
          ... on SecureCredentialEntityOutline {
            accountId
            guid
            name
            tags {
              key
              values
            }
            updatedAt
          }
        }
      }
    }
  }
}
```
  </Collapser>
</CollapserGroup>

## Use mutations to manage your synthetic monitors [#mutation]

Unlike queries, mutations are dynamic requests that create or update data from New Relic's servers.  A mutation:

* Begins with the keyword <var>mutation</var>.
* Defines the action. For example, <var>syntheticsUpdateCertCheckMonitor</var> updates your certificate check monitor.

To find a full list of attributes:

1. 
2. 
3. 
4. 

Location and other field descriptions
Location and other field descriptions
Location
Private locations use the entity GUID of the private location. Include a vsePassword attribute if verified script execution is enabled for your private locations. For example: 

```
locations: {
  private: {
    guid: "<LOCATION_ENTITY_GUID>", 
    vsePassword: "<VSE_PASSWORD>"
  }
}
Public locations use the location identifier without AWS_, for example: 
locations: {
  public: ["US_EAST_2", "US_WEST_1"]
}
``` 

Period
EVERY_MINUTE
EVERY_5_MINUTES
EVERY_10_MINUTES
EVERY_15_MINUTES
EVERY_30_MINUTES
EVERY_HOUR
EVERY_6_HOURS
EVERY_12_HOURS
EVERY_DAY

Tags are optional and can be added during monitor creation or later using tagging NerdGraph calls or the UI. Multiple tags can be added in a single mutation call using an array containing keys and values.

## Create your synthetic monitors 

Below are scripts to automate the creation of your synthetic monitors, including broken links, step, and certificate check monitors. To learn more about monitor use cases, read [Types of synthetic monitors](https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/getting-started/types-synthetic-monitors). 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id=""
    title="Create a ping or simple browser monitor"
  >
  Ping monitors check that your application is running. 

  <table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        Attribute
      </th>
      <th>
        Description 
      </th>
    </tr>
  </thead>
    <tbody>
    <tr>
      <td>
        `MONITORED_URI`
      </td>
      <td>
        The URI the monitor will request. 
      </td>
    </tr>

        <tr>
      <td>
        `HEADER_NAME`
      </td>
      <td>
        What is a header_name used for?  
      </td>
    </tr>

    <tr>
      <td>
        `HEADER_VALUE`
      </td>
      <td>
        What is a header value used for?
      </td>
    </tr>

    <tr>
      <td>
        `REDIRECT_IS_FAILURE`
      </td>
      <td>
        What is this used for? 
      </td>
    </tr>

    <tr>
      <td>
        `VALIDATION_TEXT`
      </td>
      <td>
        If certain text is not included 'in the response', this returns 'fail'
      </td>
    </tr>

    <tr>
      <td>
        `TLS_VALIDATION`
      </td>
      <td>
        Verify the validity of the SSL certificate chain, which returns as true or false. 
      </td>
    </tr>

    <tr>
      <td>
        `ENABLE_SCREENSHOT`
      </td>
      <td>
        Disable screenshots on failure. What does true/false mean in draft? 
      </td>
    </tr>
    </tbody>
</table> 

```
  mutation {
    syntheticsCreateSimpleMonitor (
      accountId: <var>YOUR_NR_ACCOUNT_ID</var> 
      monitor: {
        locations: {
          public: [<var>LOCATION_1</var>, <var>LOCATION_2</var>]
          }, 
        name: <var>MONITOR_NAME</var>, 
        period: <var>PERIOD</var>, 
        status: <var>STATUS</var>, 
        uri: <var>MONITORED_URI</var>, 
        advancedOptions: {
          customHeaders: {
            name: <var>HEADER_NAME</var>, 
            value: <var>HEADER_VALUE</var>
          }, 
          redirectIsFailure: <var>REDIRECT_IS_FAILURE</var>, 
          responseValidationText: <var>VALIDATION_TEXT</var>, 
          shouldBypassHeadRequest: <var>BYPASS_HEAD_REQUEST</var>, 
          useTlsValidation: <var>TLS_VALIDATION</var>
        }
      }
  ) {
      errors {
        description
        type
      }
    }
  }
```

While ping monitors check that your application is running, simple browser monitors use an instance of Google Chrome to mimic a customer visit.

  ```
  mutation {
    syntheticsCreateSimpleBrowserMonitor (
      accountId: `NR_ACCOUNT_ID`, 
      monitor: {
        browserType: `BROWSER_TYPE`, 
        browserVersion: `BROWSER_VERSION`, 
        locations: {
          public: [`LOCATION_1`, `LOCATION_2`]
          }, 
        name: `MONITOR_NAME`, 
        period: `PERIOD`, 
        scriptLanguage: `SCRIPT_LANGUAGE`, 
        status: `STATUS`, 
        uri: `MONITORED_URI`, 
        advancedOptions: {
          customHeaders: {
            name: `HEADER_NAME`, 
            value: `HEADER_VALUE`
          }, 
          enableScreenshotOnFailureAndScript: `ENABLE_SCREENSHOT`, 
          responseValidationText: `VALIDATION_TEXT`, 
          useTlsValidation: `TLS_VALIDATION`
        }
      ) {
      errors {
        description
        type
      }
    }
  }
  ```

</Collapser>

<Collapser
    className="freq-link"
    id=""
    title="Create a scripted browser or API test monitor"
  >

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Attribute
      </th>
      <th>
        Description 
      </th>
    </tr>
  </thead>
    <tbody>
    <tr>
      <td>
        `SCRIPT_CONTENT`
      </td>
      <td>
        What makes up contents for scripted browser scripts? Not base64 encoded. 
      </td>
    </tr>

        <tr>
      <td>
        `SCRIPT_LANGUAGE`
      </td>
      <td>
        Specifies the script language. Only JavaScript is currently supported.  
      </td>
    </tr>

    <tr>
      <td>
        `ENABLE_SCREENSHOT`
      </td>
      <td>
        Disable screenshots on failure. What does true/false mean in draft? 
      </td>
    </tr>
    </tbody>
</table> 

  Scripted browser monitors are more complex interactions with website. They take specify actions, navigating your website to check for specific resources.
  
```
  mutation {
    syntheticsCreateScriptBrowserMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: { 
        browserType: "<BROWSER_TYPE>", 
        browserVersion: <BROWSER_VERSION>, 
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          }, 
        name: "<MONITOR_NAME>", 
        period: <PERIOD>, 
        script: "<SCRIPT_CONTENT>", 
        scriptLanguage: "<SCRIPT_LANGUAGE>", 
        status: <STATUS>, 
        advancedOptions: {
          enableScreenshotOnFailureAndScript: false
        }
      }
    ) {
      errors {
        description
        type
      }
    }
  }
```

  API test monitors check your API endpoints.

```
  mutation {
    syntheticsCreateScriptApiMonitor (
      accountId: <var>NR_ACCOUNT_ID</var>, 
      monitor: {
        locations: {
          public: [<var>LOCATION_1</var>, <var>LOCATION_2</var>]
          }, 
        name: <var>MONITOR_NAME</var>, 
        period: <var>PERIOD></var>, 
        script: <var>PSCRIPT_CONTENT</var>, 
        status: <var>STATUS</var>
      }
    ) {
      errors {
        description
        type
      }
    }
  }
```

  </Collapser>

  <Collapser
    className="freq-link"
    id=""
    title="Create a step monitor"
  >
  Step monitors SOMETHING

  ```
  SOMETHING
  ```

  </Collapser>

  <Collapser
    className="freq-link"
    id=""
    title="Create a certificate check monitor"
  >
  <table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Attribute
      </th>
      <th>
        Description 
      </th>
    </tr>
  </thead>
    <tbody>
    <tr>
      <td>
        `DOMAIN`
      </td>
      <td>
        What makes up contents for scripted browser scripts? Not base64 encoded. 
      </td>
    </tr>

        <tr>
      <td>
        `DAYS_UNTIL_EXPIRATION`
      </td>
      <td>
        The number of days prior to expiration when the monitor should start failing, providing proactive notification when certificate updates are required 
      </td>
    </tr>

    </tbody>
</table> 

```
  mutation {
    syntheticsCreateCertCheckMonitor (
      accountId: <NR_ACCOUNT_ID>, 
      monitor: {
        domain: "<DOMAIN>", 
        locations: {
          public: ["<LOCATION_1>", "<LOCATION_2>"]
          },
        name: "<MONITOR_NAME>", 
        numberDaysToFailBeforeCertExpires: <DAYS_UNTIL_EXPIRATION>, 
        period: <PERIOD>, 
        status: <STATUS>
      }
    ) {
      errors {
        description
        type
      }
    }
  }
```

  </Collapser>

  <Collapser
    className="freq-link"
    id=""
    title="Create a broken links monitor"
  >

  </Collapser>
</CollapserGroup> 

## Update your synthetic monitors 

While you can't change the monitor type after creating it, you can update its settings:

<CollapserGroup>
  <Collapser
    className="freq-link"
    id=""
    title="Update a ping or simple browser monitor"
  >

  </Collapser>

  <Collapser
    className="freq-link"
    id=""
    title="Update a scripted browser or API test monitor"
  >

  </Collapser>

  <Collapser
    className="freq-link"
    id=""
    title="Update a step monitor"
  >

  </Collapser>

  <Collapser
    className="freq-link"
    id=""
    title="Update a certificate check monitor"
  >

  </Collapser>

  <Collapser
    className="freq-link"
    id=""
    title="Update a broken links monitor"
  >

  </Collapser>
</CollapserGroup>

## Delete your synthetic monitors 

Sometimes a monitor doesn't serve your needs anymore. Use these scripts to delete your monitors: 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id=""
    title="Delete monitors"
  >

  Replace ```ENTITY_GUID``` with the entity GUID of the monitor to delete.

  ```
  mutation {
    syntheticsDeleteMonitor (
      guid: "<ENTITY_GUID>"
      ) {
      errors {
        description
      }
    }
  }
  ```
  
  ### Scripted API monitors

  ```
  SOMETHING
  ```

  </Collapser>
</CollapserGroup>

## Manage your private locations

A [private location](https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/private-locations/priv[…]locations-overview-monitor-internal-sites-add-new-locations/) allows you to monitor applications behind your firewall. When you create a private location, you install and configure private minions to execute the monitors assigned to that private location. 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="private-location"
    title="Create a private location"
  >

  Replace ```NR_ACCOUNT_ID``` with the New Relic account ID where the private location should be created.

  ```
  mutation{
    syntheticsCreatePrivateLocation (
      accountId: ```NR_ACCOUNT_ID```,
      name: "PrivateLocationName",
      description: "Optional description",
      verifiedScriptExecution: false
    ) {
      guid
      errors {
        description
        type
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="private-location"
    title="Update a private location"
  >

  Only the description and verified script execution settings can be changed. Replace ```ENTITY_GUID``` with the entity GUID for the private location entity.

  ```
  mutation {
    syntheticsUpdatePrivateLocation (
      guid: "<ENTITY_GUID>",     
      description: "My new description", 
      verifiedScriptExecution: true
    ) {
    description
    verifiedScriptExecution
    errors {
      description
      type
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="delete-private locations"
    title="Delete a private location"
  >
  Replace ```ENTITY_GUID``` with the entity GUID for the private location entity.

  ```
  mutation {
    syntheticsDeletePrivateLocation (
      guid: "<ENTITY_GUID>"
      ) {
      errors {
        description
        type
      }
    }
  }
  ```
  </Collapser>
  <Collapser
    className="freq-link"
    id="purge-private-location"
    title="Purge a private location job queue"
  >
  Replace ```ENTITY_GUID``` with the entity GUID for the private location entity.

  ```
  mutation {
    syntheticsPurgePrivateLocationQueue (
      guid: "<ENTITY_GUID>"
      ) {
      errors {
        description
        type
      }
    }
  }
  ```
  </Collapser>
</CollapserGroup>

## Manage your secure credentials

You use [secure credentials](https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/using-monitors/store-secure-credentials-scripted-browsers-api-tests/) when storing, protecting, and centrally managing protected information used by your monitors, like passwords, API keys, or encoded certificates. Using NerdGraph allows you to programmatically change the values of your secure credentials if you need to reset any credentials for any reason.

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="secure-credential"
    title="Create a secure credential"
  >
  Replace ```NR_ACCOUNT_ID``` with your account ID, ```KEY_ALL_CAPS``` with the secure credential name, and ```VALUE``` with the secure credential value.

  ```
  mutation {
    syntheticsCreateSecureCredential (
      accountId: <NR_ACCOUNT_ID>, 
      description: "Optional description", 
      key: "<KEY_ALL_CAPS>", 
      value: "<VALUE>"
      ) {
      errors {
        description
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="update-secure"
    title="Update a secure credential"
  >
  Replace ```NR_ACCOUNT_ID``` with your account ID, ```KEY_ALL_CAPS``` with the existing secure credential name, and ```VALUE``` with the secure credential value.

  ```
  mutation {
    syntheticsUpdateSecureCredential (
      accountId: <NR_ACCOUNT_ID>, 
      description: "Optional description", 
      key: "<KEY_ALL_CAPS>, 
      value: "<VALUE>") {
      createdAt
      lastUpdate
      errors {
        description
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="secure-credential"
    title="Delete a secure credential"
  >
  Replace ```NR_ACCOUNT_ID``` with your account ID and ```KEY_ALL_CAPS``` with the existing secure credential name.

  ```
  mutation {
    syntheticsDeleteSecureCredential (
      accountId: <NR_ACCOUNT_ID>, 
      key: "<KEY_ALL_CAPS>"
      ) {
      errors {
        description
      }
    }
  }
  ```
  </Collapser>
</CollapserGroup>
---
title: PostgreSQL統合の設定
tags:
  - Integrations
  - On-host integrations
  - Advanced configuration
metaDescription: New Relic's PostgreSQL monitoring integration's advanced configuration
translationType: machine
---

このインテグレーションはオープンソースソフトウェアです。つまり、[ソースコードを参照](https://github.com/newrelic/nri-nginx "新しいウィンドウにリンクが開きます。")して改善を送信したり、独自のフォークを作成して構築したりできます。

### PostgreSQLインスタンスの設定 [#instance-settings]

PostgreSQLとの連携では、Metrics(<strong> M</strong> )とInventory(<strong> I</strong> )の両方の情報を収集します。以下の **Applies To** カラムをチェックして、それぞれのコレクションに使用できる設定を確認してください。

' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' '

<table>
  <thead>
    <tr>
      <th style={{ width: '150px' }}>
        設定
      </th>

      <th>
        説明
      </th>

      <th>
        デフォルト
      </th>

      <th>
        適用先
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        **HOSTNAME**
      </td>

      <td>
        PostgreSQL接続のホスト名です。
      </td>

      <td>
        localhost
      </td>

      <td style={{ "text-align": "center" }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **ポート**
      </td>

      <td>
        PostgreSQLが動作しているポートです。
      </td>

      <td>
        5432
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **ユーザー名**
      </td>

      <td>
        PostgreSQL接続のユーザー名 **必須。**
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **パスワード**
      </td>

      <td>
        PostgreSQL接続のパスワード。 **必須。**
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **コレクションリスト**
      </td>

      <td>
        収集するエンティティを指定する、JSON配列、JSONオブジェクト、または文字列リテラル `ALL` のいずれかを指定します。PostgreSQLユーザは、 `SELECT` の権限を持つテーブルからのみ、テーブルとインデックスのメトリクスを収集することができます。

        **PgBouncer以外は必須です。**

        [例](#example-postgresSQL-collection-config).
      </td>

      <td>
        該当なし
      </td>

      <td style={{ "text-align": "center" }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **collection_ignore_database_list**
      </td>

      <td>
        メトリクス収集のために無視されるデータベース名のJSON配列です。一般的に、 `COLLECTION_LIST` が `ALL` に設定されていて、一部のデータベースを無視する必要がある場合に便利です。
      </td>

      <td>
        '\[]'
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **PGBOUNCER**
      </td>

      <td>
        `pgbouncer` メトリクスを収集します。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **ENABLE_SSL**
      </td>

      <td>
        SSLが有効になっているかどうかを判断します。 `trueの場合`, `ssl_cert_location` と `ssl_key_location` が必要です。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **trust_server_certificate**
      </td>

      <td>
        `true` の場合、サーバー証明書のSSL検証は行われません。 `false` の場合、 `ssl_root_cert_location` で特定されるサーバー証明書が検証されます。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **ssl_root_cert_location**
      </td>

      <td>
        PEMエンコードされたルート証明書ファイルへの絶対パス。 `trust_server_certificate` が `false` の場合に必要です。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **ssl_cert_location**
      </td>

      <td>
        PEMエンコードされたクライアント証明書ファイルの絶対パス。Required if `enable_ssl` is `true`.
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **ssl_key_location**
      </td>

      <td>
        PEMエンコードされたクライアントキーファイルの絶対パス。 `enable_ssl` が `true の場合は必須`.
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **タイムアウト**
      </td>

      <td>
        接続の最大待ち時間を秒単位で指定します。 `0` に設定すると、タイムアウトはありません。
      </td>

      <td>
        10
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **データベース**
      </td>

      <td>
        接続先のPostgreSQLデータベースです。
      </td>

      <td>
        postgres
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **カスタム・メトリクス・クエリ**
      </td>

      <td>
        `カラム metric_name`, `metric_type`, `metric_value.metric_type` を必要とした SQL クエリは、 `gauge`, `rate`, `delta`, または `attribute`.クエリで収集された追加のカラムは、属性としてメトリックセットに追加されます。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **custom_metrics_config**
      </td>

      <td>
        カスタムクエリのリストと、そのメトリックタイプ、データベース、サンプル名のオーバーライドを含むYAMLファイルへのパス。詳細は例を参照してください。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **collect_db_lock_metrics**
      </td>

      <td>
        パフォーマンスが低下する可能性のあるデータベースロックのメトリクスを収集できるようになりました。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **collect_bloat_metrics**
      </td>

      <td>
        パフォーマンスが低下する可能性のあるテーブルスペースブルートメトリクスを有効にします。
      </td>

      <td>
        true
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **メトリクス**
      </td>

      <td>
        メトリクスのみの収集を有効にするには、 `true` に設定します。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>

    <tr>
      <td>
        **インベントリ**
      </td>

      <td>
        `true` に設定すると、インベントリのみの収集が可能になります。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>
  </tbody>
</table>

これらの設定値は、いくつかの方法で定義できます。

* コンフィグファイルに直接値を追加する。これが最も一般的な方法です。
* `{{}}` 表記を使用して環境変数から値を置き換えます。これには、インフラストラクチャエージェントv1.14.0+が必要です。詳しくはこちら [](/docs/infrastructure/install-infrastructure-agent/configuration/configure-infrastructure-agent/#passthrough).
* シークレット管理を使用する。設定ファイル上でパスワードなどの常識的な情報が平文で公開されるのを防ぐために使用します。詳細については、 [Secrets management](/docs/integrations/host-integrations/installation/secrets-management) を参照してください。

### ラベルとカスタムアトリビュート [#labels]

環境変数を使用して、ライセンスキーなどのコンフィグ設定を制御し、インフラストラクチャーエージェントに渡すことができます。この機能の使用方法については、 [インフラストラクチャ・エージェントの構成](/docs/infrastructure/new-relic-infrastructure/configuration/configure-infrastructure-agent#passthrough) を参照してください。ラベルを使用して、メトリックをさらに装飾することができます。ラベルを使用すると、キー/値ペアの属性をメトリックに追加できます。この属性を使用して、メトリックのクエリ、フィ ルター、またはグループ化を行うことができます。

デフォルトのサンプル設定ファイルにはラベルの例が含まれていますが、ラベルは必須ではありませんので、お好みで削除、修正、新規追加することが可能です。

```yml
 labels:
   env: production
   role: postgresql
```

## インベントリデータ [#inventory]

PostgreSQLの統合では、 `pg_settings` から各設定を、 `boot_val` と `reset_val` とともに収集します。 [インベントリデータ](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data) は、 **config/postgresql** ソースの下の [Inventory ページ](/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-inventory-page-search-your-entire-infrastructure) に表示されます。

## メトリクス [#metrics]

PostgreSQL統合は、以下のメトリクスを収集します。

* [PostgresqlDatabaseSampleのメトリクス](#databaseSample)
* [PostgresqlIndexSampleメトリクス](#indexSample)
* [PostgresqlInstanceSampleメトリクス](#instanceSample)
* [PostgresqlTableSampleメトリクス](#tableSample)
* [PgBouncerSampleメトリクス](#pgBouncerSample)

<Callout variant="tip">
  一部の指標名には、 `db.` や `index.` のように、カテゴリー指標とピリオドが前についているものがあります。
</Callout>

### PostgresqlDatabaseSampleのメトリクス [#databaseSample]

これらの属性は、 `PostgresqlDatabaseSample` イベントタイプに添付されます。

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        PostgreSQLDatabaseSampleの属性
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `db.connection`
      </td>

      <td>
        このデータベースに現在接続されているバックエンドの数。
      </td>
    </tr>

    <tr>
      <td>
        `db.maxconnections`
      </td>

      <td>
        データベースサーバーへの最大同時接続数です。
      </td>
    </tr>

    <tr>
      <td>
        `db.commitsPerSecond`
      </td>

      <td>
        コミットされたトランザクション/秒。
      </td>
    </tr>

    <tr>
      <td>
        `db.rollbacksPerSecond`
      </td>

      <td>
        1秒間にロールバックされるトランザクション数
      </td>
    </tr>

    <tr>
      <td>
        `db.ReadsPerSecond`
      </td>

      <td>
        このデータベースで1秒間に読み込まれたディスクブロック数。
      </td>
    </tr>

    <tr>
      <td>
        `db.bufferHitsPerSecond`
      </td>

      <td>
        ディスクブロックがバッファキャッシュ内に既に存在し、読み取りが不要であった回数です。これは、オペレーティングシステムのファイルシステムキャッシュではなく、PostgreSQLのバッファキャッシュでのヒットのみを含みます。
      </td>
    </tr>

    <tr>
      <td>
        `db.RowsReturnedPerSecond`
      </td>

      <td>
        1秒あたりのクエリで返される行数。
      </td>
    </tr>

    <tr>
      <td>
        `db.RowsFetchedPerSecond`
      </td>

      <td>
        1秒間にクエリで取得された行数。
      </td>
    </tr>

    <tr>
      <td>
        `db.rowsInsertedPerSecond`
      </td>

      <td>
        1秒間に挿入される行数。
      </td>
    </tr>

    <tr>
      <td>
        `db.rowsUpdatedPerSecond`
      </td>

      <td>
        1秒間に更新される行数。
      </td>
    </tr>

    <tr>
      <td>
        `db.rowsDeletedPerSecond`
      </td>

      <td>
        1秒間に削除される行数。
      </td>
    </tr>

    <tr>
      <td>
        `db.conflicts.tablespacePerSecond`
      </td>

      <td>
        このデータベースで、ドロップされたテーブルスペースのためにキャンセルされたクエリの数。
      </td>
    </tr>

    <tr>
      <td>
        `db.conflicts.locksPerSecond`
      </td>

      <td>
        このデータベースで、ロックのタイムアウトによりキャンセルされたクエリの数。
      </td>
    </tr>

    <tr>
      <td>
        `db.conflicts.snapshotPerSecond`
      </td>

      <td>
        古いスナップショットのためにキャンセルされた、このデータベースのクエリの数。
      </td>
    </tr>

    <tr>
      <td>
        `db.conflicts.bufferpinPerSecond`
      </td>

      <td>
        このデータベースで、バッファが固定されているためにキャンセルされたクエリの数。
      </td>
    </tr>

    <tr>
      <td>
        `db.conflicts.deadlockPerSecond`
      </td>

      <td>
        このデータベースでデッドロックのためにキャンセルされたクエリの数。
      </td>
    </tr>

    <tr>
      <td>
        `db.temppFilesCreatedPerSecond`
      </td>

      <td>
        このデータベースのクエリによって作成された一時ファイルの数。一時ファイルが作成された理由（ソートやハッシュ化など）や、 `log_temp_files` の設定に関わらず、すべての一時ファイルがカウントされます。
      </td>
    </tr>

    <tr>
      <td>
        `db.tempWrittenInBytesPerSecond`
      </td>

      <td>
        このデータベースのクエリによって一時ファイルに書き込まれたデータの総量。一時ファイルが作成された理由や、 `log_temp_files` の設定にかかわらず、すべての一時ファイルがカウントされます。
      </td>
    </tr>

    <tr>
      <td>
        `db.deadlocksPerSecond`
      </td>

      <td>
        このデータベースで検出されたデッドロックの数。
      </td>
    </tr>

    <tr>
      <td>
        `db.readTimeInMillisecondsPerSecond`
      </td>

      <td>
        このデータベースのバックエンドがデータファイルのブロックを読み込むのにかかった時間（単位：ミリ秒）。
      </td>
    </tr>

    <tr>
      <td>
        `db.writeTimeInMillisecondsPerSecond`
      </td>

      <td>
        このデータベースのバックエンドによるデータファイルブロックの書き込みにかかった時間（単位：ミリ秒）。
      </td>
    </tr>
  </tbody>
</table>

### PostgresqlIndexSampleメトリクス [#indexSample]

これらの属性は、 `PostgresqlIndexSample` イベントタイプに添付されます。

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        PostgreSQLIndexSampleの属性
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `index.sizeInBytes`
      </td>

      <td>
        インデックスのサイズです。
      </td>
    </tr>

    <tr>
      <td>
        `index.rowsReadPerSecond`
      </td>

      <td>
        このインデックスに対するスキャンによって返されたインデックス・エントリの数です。
      </td>
    </tr>

    <tr>
      <td>
        `index.rowsFetchedPerSecond`
      </td>

      <td>
        このインデックスに対するスキャンによってフェッチされたインデックスエントリの数。
      </td>
    </tr>
  </tbody>
</table>

### PostgresqlInstanceSampleメトリクス [#instanceSample]

これらの属性は、 `PostgresqlInstanceSample` イベントタイプに添付されます。

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        PostgreSQLInstanceSample属性
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `bgwriter.checkpointsScheduledPerSecond`
      </td>

      <td>
        実行されたスケジュールされたチェックポイントの数。
      </td>
    </tr>

    <tr>
      <td>
        `bgwriter.checkpointsRequestedPerSecond`
      </td>

      <td>
        要求されたチェックポイントが実行された数。
      </td>
    </tr>

    <tr>
      <td>
        `bgwriter.buffersWrittenForCheckpointsPerSecond`
      </td>

      <td>
        チェックポイント中に書き込まれたバッファの数。
      </td>
    </tr>

    <tr>
      <td>
        `bgwriter.buffersWrittenByBackgroundWriterPerSecond`
      </td>

      <td>
        バックグラウンドライターで書き込まれたバッファの数。
      </td>
    </tr>

    <tr>
      <td>
        `bgwriter.backgroundWriterStopsPerSecond`
      </td>

      <td>
        バッファの書き込みが多すぎたために、バックグラウンドライターがクリーニングスキャンを停止した回数。
      </td>
    </tr>

    <tr>
      <td>
        `bgwriter.buffersWrittenByBackendPerSecond`
      </td>

      <td>
        バックエンドが直接書き込んだバッファの数。
      </td>
    </tr>

    <tr>
      <td>
        `bgwriter.buffersAllocatedPerSecond`
      </td>

      <td>
        割り当てられたバッファの数。
      </td>
    </tr>

    <tr>
      <td>
        `bgwriter.backendFsyncCallsPerSecond`
      </td>

      <td>
        バックエンドが独自に `fsync` 呼び出しを実行しなければならなかった回数。通常は、バックエンドが独自の書き込みを行っても、バックグラウンドのライターが処理します。
      </td>
    </tr>

    <tr>
      <td>
        `bgwriter.checkpointWriteTimeInMillisecondsPerSecond`
      </td>

      <td>
        チェックポイント処理のうち、ファイルをディスクに書き込む処理にかかった時間の合計（単位：ミリ秒）。
      </td>
    </tr>

    <tr>
      <td>
        `bgwriter.checkpointSyncTimeInMillisecondsPerSecond`
      </td>

      <td>
        チェックポイント処理のうち、ファイルをディスクに同期させる処理にかかった時間の合計（単位：ミリ秒）。
      </td>
    </tr>
  </tbody>
</table>

### PostgresqlTableSampleメトリクス [#tableSample]

これらの属性は、 `PostgresqlTableSample` イベントタイプに添付されます。

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        PostgreSQLTableSampleの属性
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `table.totalSizeInBytes`
      </td>

      <td>
        インデックスとTOASTデータを含む、テーブルが使用する総ディスク容量。
      </td>
    </tr>

    <tr>
      <td>
        `table.indexSizeInBytes`
      </td>

      <td>
        指定されたテーブルにアタッチされたインデックスが使用するディスク容量の合計です。
      </td>
    </tr>

    <tr>
      <td>
        `table.liveRows`
      </td>

      <td>
        ライブの列数
      </td>
    </tr>

    <tr>
      <td>
        `table.deadRows`
      </td>

      <td>
        デッドローの数
      </td>
    </tr>

    <tr>
      <td>
        `table.indexBlocksReadPerSecond`
      </td>

      <td>
        このテーブルのすべてのインデックスから読み込まれたディスクブロックの数です。
      </td>
    </tr>

    <tr>
      <td>
        `table.indexBlocksHitPerSecond`
      </td>

      <td>
        このテーブルのすべてのインデックスにおけるバッファヒットの数。
      </td>
    </tr>

    <tr>
      <td>
        `table.indexToastBlocksReadPerSecond`
      </td>

      <td>
        このテーブルのTOASTテーブルインデックスから読み込まれたディスクブロックの数。
      </td>
    </tr>

    <tr>
      <td>
        `table.indexToastBlocksHitPerSecond`
      </td>

      <td>
        このテーブルのTOASTテーブルインデックスのバッファヒットの数。
      </td>
    </tr>

    <tr>
      <td>
        `Table.LastVacuum`
      </td>

      <td>
        テーブルに最後の真空をかけた時間
      </td>
    </tr>

    <tr>
      <td>
        `table.lastAutoVacuum`
      </td>

      <td>
        テーブルに最後に自動バキュームをかけた時間
      </td>
    </tr>

    <tr>
      <td>
        `table.lastAnalyze`
      </td>

      <td>
        テーブル上での最後の分析の時間。
      </td>
    </tr>

    <tr>
      <td>
        `table.lastAutoAnalyze`
      </td>

      <td>
        最後に自動分析を行った時間
      </td>
    </tr>

    <tr>
      <td>
        `table.sequentialScansPerSecond`
      </td>

      <td>
        このテーブルに対して1秒あたりに実行されるシーケンシャルスキャンの数。
      </td>
    </tr>

    <tr>
      <td>
        `table.secensialScanRowsFetchedPerSecond`
      </td>

      <td>
        シーケンシャルスキャンによって1秒あたりに取得されたライブ行の数。
      </td>
    </tr>

    <tr>
      <td>
        `table.indexScansPerSecond`
      </td>

      <td>
        このテーブルで行われたインデックススキャンの数。
      </td>
    </tr>

    <tr>
      <td>
        `table.indexScanRowsFetchedPerSecon`
      </td>

      <td>
        インデックススキャンによって取得されたライブ行の数。
      </td>
    </tr>

    <tr>
      <td>
        `table.rowsInsertedPerSecond`
      </td>

      <td>
        1秒間に挿入される行数。
      </td>
    </tr>

    <tr>
      <td>
        `table.rowsUpdatedPerSecond`
      </td>

      <td>
        1秒間に更新される行数。
      </td>
    </tr>

    <tr>
      <td>
        `table.rowsDeletedPerSecond`
      </td>

      <td>
        1秒間に削除される行数。
      </td>
    </tr>

    <tr>
      <td>
        `Table.bloatSizeInBytes`
      </td>

      <td>
        ブルートのサイズ（バイト）。
      </td>
    </tr>

    <tr>
      <td>
        `table.dataSizeInBytes`
      </td>

      <td>
        テーブルのメインフォークが使用するディスクの間隔のサイズ。
      </td>
    </tr>

    <tr>
      <td>
        `table.bloatRatio`
      </td>

      <td>
        テーブルのデータサイズのうち、肥大化している部分の割合。
      </td>
    </tr>
  </tbody>
</table>

### PgBouncerSampleメトリクス [#pgBouncerSample]

これらの属性は、 `PgBouncerSample` イベントタイプに付けられています。

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        PgBouncerSampleの属性
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `pgbouncer.stats.trampsampsPerSecond`
      </td>

      <td>
        取引レートです。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.stats.questionsPerSecond`
      </td>

      <td>
        クエリーレートです。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.stats.bytesInPerSecond`
      </td>

      <td>
        受信したネットワークトラフィックの総量です。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.stats.bytesOutPerSecond`
      </td>

      <td>
        送信されたネットワークトラフィックの総量です。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.stats.toutalTransactionDurationInMillisecondsPerSecond`
      </td>

      <td>
        `pgbouncer` がトランザクションに費やした時間。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.stats.totalQueryDurationInMillisecondsPerSecond`
      </td>

      <td>
        `pgbouncer` が積極的にPostgreSQLを照会するのに費やした時間。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.stats.avgTransactionCount`
      </td>

      <td>
        直近の統計期間における1秒あたりの平均トランザクション数。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.stats.avgTransactionDurationInMilliseconds`
      </td>

      <td>
        トランザクションの平均時間です。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.stats.avgQueryCount`
      </td>

      <td>
        直近の統計期間における、1秒あたりの平均クエリ数。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.stats.avgBytesIn`
      </td>

      <td>
        受信したクライアントのネットワークトラフィックを
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.stats.avgBytesOut`
      </td>

      <td>
        送信されたクライアントのネットワークトラフィック。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.stats.avgQueryDurationInMilliseconds`
      </td>

      <td>
        クエリの平均時間です。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.pools.clientConnectionsActive`
      </td>

      <td>
        クライアントの接続は、サーバーの接続にリンクされ、クエリを処理することができます。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.pools.clientConnectionsWaiting`
      </td>

      <td>
        クライアントの接続がサーバーの接続を待っている状態。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.pools.serverConnectionsActive`
      </td>

      <td>
        クライアント接続にリンクされたサーバー接続。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.pools.serverConnectionsIdle`
      </td>

      <td>
        サーバー接続はアイドル状態で、クライアントからの問い合わせに対応しています。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.pools.serverConnectionsUsed`
      </td>

      <td>
        サーバー接続のアイドルは、 `server_check_delay` 以上で、 `server_check_query` が必要です。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.pools.serverConnectionsTested`
      </td>

      <td>
        現在実行中のサーバー接続は、 `server_reset_query` または `server_check_query` のいずれかです。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.pools.serverConnectionsLogin`
      </td>

      <td>
        現在ログイン処理中のサーバー接続。
      </td>
    </tr>

    <tr>
      <td>
        `pgbouncer.pools.maxwaitInMilliseconds`
      </td>

      <td>
        最も古い未サービスのクライアント接続の年齢。
      </td>
    </tr>
  </tbody>
</table>

## トラブルシューティング [#troubleshooting]

ここでは、PostgreSQLとの連携に関するトラブルシューティングをご紹介します。

* 接続に問題がある場合は、 `psql` で同じボックスからクラスタに接続できることを確認してください。
* `PgBouncer` メトリクスの収集に問題がある場合は、 `PgBouncer` を通じてインスタンスに接続していることを確認してください。デフォルトのポートは `6432` です。
* エラーメッセージ `Error creating list of entities to collect: pq: unsupported startup parameter: extra_float_digits` が表示された場合は、PgBouncerの設定ファイルで `ignore_startup_parameters = extra_float_digits` を設定してください。
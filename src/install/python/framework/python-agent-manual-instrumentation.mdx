---
componentType: appInfo
optionType: framework
headingText: Steps for manual initialization
---

Follow these steps to manually initialize your app with New Relic since you may not be using a framework that allows automatic initialization using the `newrelic-admin` script.

The manual process involves importing a Python agent package into your app and making a call to initialize the agent. This call modifies your app's import mechanism so that when libraries are imported, the agent listens for the function classes it recognizes.

### Manual integration in app code [#manual-integration]

For manual integration, add the following to the beginning of the application script file or module that holds your WSGI entry point. In this example, <var>/some/path/newrelic.ini</var> represents the location of the copy of the config file created earlier. The config file must be readable by your web application.

```
import newrelic.agent
newrelic.agent.<a href="/docs/agents/python-agent/python-agent-api/initialize">initialize</a>('<var>/some/path</var>/newrelic.ini')
<var>... YOUR_OTHER_IMPORTS</var>
```
<Callout variant="important">
  Unlike standard Python functionality, the import order matters: the agent package must be imported first.
</Callout>

Here's a simple `Hello, world` example with manual initialization:

```
import newrelic.agent
newrelic.agent.initialize('newrelic.ini') #This is required!

def greet(name):
    """
    This function says hello to
    the person who is passed in as
    a parameter
    """
    print("Hello, " + name + " and the world!")


def execute_task(application, task_name):
    with newrelic.agent.BackgroundTask(application, name=task_name, group='Task'):
        greet("Robert")

application = newrelic.agent.register_application(timeout=10)
execute_task(application, "bar")
newrelic.agent.shutdown_agent(timeout=10)
```

### Additional considerations [#additional]

Here are some additional options related to manual initialization:

<CollapserGroup>
  <Collapser
    id="environment-override"
    title="Admin script with deployment environment overrides"
  >
    To specify an override in the agent config file that corresponds to a specific deployment environment, supply the environment's name as the second argument to the [`initialize()` function](/docs/agents/python-agent/python-agent-api/initialize). If you have installed the Python package into a Python virtual environment, you must add these lines after you have activated or set up **sys.path** to find your virtual environment.

    ```
    import newrelic.agent
    newrelic.agent.initialize('<var>/some/path</var>/newrelic.ini', 'staging')
    ```

    Whenever possible, precede any imports for modules that are going to be instrumented. For some web frameworks, including Flask, this is mandatory. The instrumentation will not work correctly if not placed before all imports that cause code from that framework to be imported.
  </Collapser>

  <Collapser
    id="manual-override"
    title="Manual configuration with deployment environment overrides"
  >
    If you do not use the admin script but still want to use the environment variables `NEW_RELIC_CONFIG_FILE` and `NEW_RELIC_ENVIRONMENT` to configure the agent, you can call the `initialize()` function with no arguments, and they will be read automatically.

    ```
    import newrelic.agent
    newrelic.agent.initialize()
    ```

    Alternatively, you can set the `NEW_RELIC_LICENSE_KEY` and `NEW_RELIC_APP_NAME` environment variables if the defaults for all other configuration settings are suitable.
  </Collapser>

  <Collapser
    id="embedded"
    title="Embedded environment overrides"
  >
    With embedded environments such as Apache/mod_wsgi, in general you cannot rely on being able to derive configuration from environment variables. This is because typically in embedded systems, you cannot set process environment variables which are in turn available to the WSGI script file. For more information, see the documentation for the [initialize()](/docs/python/python-management-api#initialize) function.
  </Collapser>
</CollapserGroup>


